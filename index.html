<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>링크 생성기</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <style>
        body {
            padding: 20px;
            font-family: Arial, sans-serif;
        }
        h1 {
            text-align: center;
            margin-bottom: 20px;
        }
        form {
            max-width: 500px;
            margin: 0 auto;
            background: #f8f9fa;
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
        }
        label {
            margin-top: 10px;
        }
        button {
            margin-top: 20px;
        }
        #generatedLink {
            margin-top: 20px;
            text-align: center;
            word-break: break-word;
        }
    </style>
</head>
<body>
    <h1>링크 생성기</h1>

    <form id="linkForm">
        <div class="mb-3">
            <label for="project" class="form-label">프로젝트 선택</label>
            <select id="project" name="project" class="form-select">
                <option value="COMMON">공통</option>
                <option value="BUS">버스</option>
                <option value="DELIVERY">배달</option>
                <option value="FLOWER">꽃배달</option>
                <option value="MEDICAL">병의원</option>
                <option value="RESERVE">예약</option>
                <option value="TAXI">택시</option>
                <option value="DRIVER">대리</option>
                <option value="ELECTRIC">전자관</option>
                <option value="BIZ">비즈</option>
                <option value="BIZ_TAXI">비즈_택시</option>
                <option value="BIZ_DRIVER">비즈_대리</option>
                <option value="BIZ_DELIVERY">비즈_배달</option>
                <option value="BIZ_FLOWER">비즈_꽃배달</option>
            </select>
        </div>

        <div class="mb-3">
            <label for="action" class="form-label">액션 선택</label>
            <select id="action" name="action" class="form-select" onchange="updateSubActionVisibility()">
                <option value="">-- 선택하세요 --</option>
                <option value="ACTION_LINK_EVENT">이벤트</option>
                <option value="ACTION_LINK_MENU">메뉴</option>
                <option value="ACTION_LINK_ORDER">주문</option>
            </select>
        </div>

        <div id="subActionFields" style="display: none;">
            <div id="subActionEvent" style="display: none;">
                <div class="mb-3">
                    <label for="eventCode" class="form-label">이벤트 코드</label>
                    <input type="text" id="eventCode" name="eventCode" class="form-control" placeholder="이벤트 코드">
                </div>
            </div>

            <div id="subActionMenu" style="display: none;">
                <div class="mb-3">
                    <label for="shopCode" class="form-label">상점 코드</label>
                    <input type="text" id="shopCode" name="shopCode" class="form-control" placeholder="상점 코드">
                </div>
                <div class="mb-3">
                    <label for="menuCode" class="form-label">메뉴 코드</label>
                    <input type="text" id="menuCode" name="menuCode" class="form-control" placeholder="메뉴 코드">
                </div>
            </div>
        </div>

        <button type="button" class="btn btn-primary w-100" onclick="generateLink()">링크 생성</button>
    </form>

    <h2 class="mt-4">생성된 링크:</h2>
    <div class="text-center">
        <p id="generatedLink" class="p-2 bg-light border rounded"></p>
        <button id="copyButton" class="btn btn-secondary" style="display: none;" onclick="copyToClipboard()">복사</button>
    </div>

    <script>
        function updateSubActionVisibility() {
            const action = document.getElementById('action').value;
            const subActionFields = document.getElementById('subActionFields');
            const subActionEvent = document.getElementById('subActionEvent');
            const subActionMenu = document.getElementById('subActionMenu');

            subActionFields.style.display = 'none';
            subActionEvent.style.display = 'none';
            subActionMenu.style.display = 'none';

            if (action === 'ACTION_LINK_EVENT') {
                subActionFields.style.display = 'block';
                subActionEvent.style.display = 'block';
            } else if (action === 'ACTION_LINK_MENU') {
                subActionFields.style.display = 'block';
                subActionMenu.style.display = 'block';
            }
        }

        function generateLink() {
            const baseUrl = "https://app.daeguro.co.kr/app/public_link.html?";
            const project = document.getElementById('project').value;
            const action = document.getElementById('action').value;

            let additionalParams = '';
            if (action === 'ACTION_LINK_EVENT') {
                const eventCode = document.getElementById('eventCode').value;
                additionalParams = `eventCode=${eventCode}`;
            } else if (action === 'ACTION_LINK_MENU') {
                const shopCode = document.getElementById('shopCode').value;
                const menuCode = document.getElementById('menuCode').value;
                additionalParams = `shopCode=${shopCode}&menuCode=${menuCode}`;
            }

            const fullLink = `${baseUrl}project=${project}&action=${action}&${additionalParams}`;

            const linkElement = document.getElementById('generatedLink');
            linkElement.innerText = fullLink;

            document.getElementById('copyButton').style.display = 'inline-block';
        }

        function copyToClipboard() {
            const linkElement = document.getElementById('generatedLink');
            navigator.clipboard.writeText(linkElement.innerText)
                .then(() => alert('링크가 복사되었습니다!'))
                .catch(() => alert('복사에 실패했습니다.'));
        }
    </script>
</body>
</html>
