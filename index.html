<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>링크 생성기</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <style>
        body {
            padding: 20px;
            font-family: Arial, sans-serif;
        }
        h1 {
            text-align: center;
            margin-bottom: 20px;
        }
        form {
            max-width: 500px;
            margin: 0 auto;
            background: #f8f9fa;
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
        }
        label {
            margin-top: 10px;
        }
        button {
            margin-top: 10px;
        }
        .btn-light {
            background-color: #e9ecef;
            border: 1px solid #ced4da;
        }
        #generatedLink {
            margin-top: 20px;
            text-align: center;
            word-break: break-word;
        }
        h2 {
            text-align: center;
            margin-top: 20px;
        }
    </style>
</head>
<body>
    <h1>링크 생성기</h1>

    <form id="linkForm">
        <div class="mb-3">
            <label for="project" class="form-label">프로젝트 선택</label>
            <select id="project" name="project" class="form-select">
                <option value="COMMON">1. 공통 (COMMON)</option>
                <option value="DELIVERY">2. 배달 (DELIVERY)</option>
                <option value="FLOWER">3. 꽃배달 (FLOWER)</option>
                <option value="TAXI">4. 택시 (TAXI)</option>
                <option value="DRIVER">5. 대리 (DRIVER)</option>
                <option value="BUS">6. 버스 (BUS)</option>
                <option value="MEDICAL">7. 병의원 (MEDICAL)</option>
                <option value="RESERVE">8. 예약 (RESERVE)</option>
                <option value="ELECTRIC">9. 전자관 (ELECTRIC)</option>
                <option value="BIZ">10. 비즈 (BIZ)</option>
                <option value="BIZ_TAXI">11. 비즈_택시 (BIZ_TAXI)</option>
                <option value="BIZ_DRIVER">12. 비즈_대리 (BIZ_DRIVER)</option>
                <option value="BIZ_DELIVERY">13. 비즈_배달 (BIZ_DELIVERY)</option>
                <option value="BIZ_FLOWER">14. 비즈_꽃배달 (BIZ_FLOWER)</option>
            </select>
        </div>

        <div class="mb-3">
            <label for="action" class="form-label">액션 선택</label>
            <select id="action" name="action" class="form-select" onchange="updateFields()">
                <option value="">-- 선택하세요 --</option>
                <option value="ACTION_LINK_ALARM">1. 알림함으로 이동 (ACTION_LINK_ALARM)</option>
                <option value="ACTION_LINK_INQUIRY_WRITE">2. 고객소리함 화면으로 이동 (ACTION_LINK_INQUIRY_WRITE)</option>
                <option value="ACTION_LINK_MILEAGE">3. 마일리지 화면으로 이동 (ACTION_LINK_MILEAGE)</option>
                <option value="ACTION_LINK_PAY_MANAGEMENT">4. 결제수단 관리 화면으로 이동 (ACTION_LINK_PAY_MANAGEMENT)</option>
                <option value="ACTION_LINK_COUPON_PUBLISH">5. 쿠폰 등록 화면 (ACTION_LINK_COUPON_PUBLISH)</option>
                <option value="ACTION_LINK_VOUCHER_PRODUCT_LIST">6. 상품권 구매 화면 (ACTION_LINK_VOUCHER_PRODUCT_LIST)</option>
                <option value="ACTION_LINK_VOUCHER">7. 상품권 보관함으로 이동 (ACTION_LINK_VOUCHER)</option>
                <option value="ACTION_LINK_NOTICE">8. 공지사항 상세 (ACTION_LINK_NOTICE)</option>
                <option value="ACTION_LINK_EVENT">9. 이벤트 상세 (ACTION_LINK_EVENT)</option>
                <option value="ACTION_LINK_BRAND_LIST">10. 브랜드 목록 화면 (ACTION_LINK_BRAND_LIST)</option>
                <option value="ACTION_LINK_SHOP_LIST">11. 상점 목록 화면 (ACTION_LINK_SHOP_LIST)</option>
                <option value="ACTION_LINK_SHOP">12. 상점 상세 화면 (ACTION_LINK_SHOP)</option>
                <option value="ACTION_LINK_SHOP_SEARCH">13. 상점 검색 (ACTION_LINK_SHOP_SEARCH)</option>
                <option value="ACTION_LINK_MENU">14. 메뉴 상세 화면 (ACTION_LINK_MENU)</option>
                <option value="ACTION_LINK_TRADITION_LIST">15. 전통시장 목록 화면 (ACTION_LINK_TRADITION_LIST)</option>
                <option value="ACTION_LINK_TRADITION">16. 전통시장 상세 화면 (ACTION_LINK_TRADITION)</option>
                <option value="ACTION_LINK_ALLEY">17. 골목상권 화면 (ACTION_LINK_ALLEY)</option>
                <option value="ACTION_LINK_PRODUCT_LIST">18. 상품 목록 화면 (ACTION_LINK_PRODUCT_LIST)</option>
                <option value="ACTION_LINK_PRODUCT">19. 상품 상세 화면 (ACTION_LINK_PRODUCT)</option>
                <option value="ACTION_LINK_PRODUCT_SEARCH">20. 상품 검색 화면 (ACTION_LINK_PRODUCT_SEARCH)</option>
                <option value="ACTION_LINK_ORDER">21. 주문 목록 화면 (ACTION_LINK_ORDER)</option>
            </select>
        </div>

        <div id="dynamicFields"></div>

        <div class="d-flex justify-content-between">
            <button type="button" class="btn btn-warning" onclick="resetAllFields()">전체 초기화</button>
            <button type="button" class="btn btn-secondary" onclick="resetAction()">액션 초기화</button>
            <button type="button" class="btn btn-light" onclick="resetDynamicFields()">필수/선택 초기화</button>
        </div>

        <button type="button" class="btn btn-primary w-100" onclick="generateLink()">링크 생성</button>
    </form>

    <h2>생성된 링크</h2>
    <div class="text-center">
        <p id="generatedLink" class="p-2 bg-light border rounded"></p>
        <button id="copyButton" class="btn btn-secondary" style="display: none;" onclick="copyToClipboard()">복사</button>
    </div>

    <script>
        const actionRequirements = {
            ACTION_LINK_ALARM: { required: [], optional: [] },
            ACTION_LINK_INQUIRY_WRITE: { required: [], optional: [] },
            ACTION_LINK_MILEAGE: { required: [], optional: [] },
            ACTION_LINK_PAY_MANAGEMENT: { required: [], optional: [] },
            ACTION_LINK_COUPON_PUBLISH: { required: [], optional: ["couponCode"] },
            ACTION_LINK_VOUCHER_PRODUCT_LIST: { required: [], optional: [] },
            ACTION_LINK_VOUCHER: { required: [], optional: ["code"] },
            ACTION_LINK_NOTICE: { required: ["code"], optional: [] },
            ACTION_LINK_EVENT: { required: ["eventCode"], optional: [] },
            ACTION_LINK_BRAND_LIST: { required: [], optional: ["chainCode"] },
            ACTION_LINK_SHOP_LIST: { required: ["itemCd"], optional: ["filterCode"] },
            ACTION_LINK_SHOP: { required: ["shopCode"], optional: [] },
            ACTION_LINK_SHOP_SEARCH: { required: [], optional: ["keyword"] },
            ACTION_LINK_MENU: { required: ["shopCode"], optional: ["menuCode"] },
            ACTION_LINK_TRADITION_LIST: { required: [], optional: ["gungu"] },
            ACTION_LINK_TRADITION: { required: ["shopCode"], optional: ["viewType"] },
            ACTION_LINK_ALLEY: { required: [], optional: ["gungu","code"] },
            ACTION_LINK_PRODUCT_LIST: { required: [], optional: ["categoryCode"] },
            ACTION_LINK_PRODUCT: { required: ["productCode"], optional: ["projectSub","shopCode"] },
            ACTION_LINK_PRODUCT_SEARCH: { required: [], optional: ["keyword"] },
            ACTION_LINK_ORDER: { required: [], optional: ["orderNo"] }
        };

        function updateFields() {
            const action = document.getElementById('action').value;
            const dynamicFields = document.getElementById('dynamicFields');
            dynamicFields.innerHTML = '';

            if (!action || !actionRequirements[action]) return;

            const { required, optional } = actionRequirements[action];

            required.forEach(field => {
                dynamicFields.innerHTML += `
                    <div class="mb-3">
                        <label for="${field}" class="form-label">${field}</label>
                        <input type="text" id="${field}" name="${field}" class="form-control" placeholder="${field} (필수)">
                    </div>
                `;
            });

            optional.forEach(field => {
                dynamicFields.innerHTML += `
                    <div class="mb-3">
                        <label for="${field}" class="form-label">(선택) ${field}</label>
                        <input type="text" id="${field}" name="${field}" class="form-control" placeholder="${field}">
                    </div>
                `;
            });
        }

        function generateLink() {
            const baseUrl = "https://app.daeguro.co.kr/app/public_link.html?";
            const project = document.getElementById('project').value;
            const action = document.getElementById('action').value;

            if (!action) {
                alert('액션을 선택하세요!');
                return;
            }

            const { required, optional } = actionRequirements[action];

            let queryParams = `project=${project}&action=${action}`;

            for (const field of required) {
                const value = document.getElementById(field)?.value;
                if (!value) {
                    alert(`${field}는 필수 입력 항목입니다.`);
                    return;
                }
                queryParams += `&${field}=${value}`;
            }

            for (const field of optional) {
                const value = document.getElementById(field)?.value;
                if (value) {
                    queryParams += `&${field}=${value}`;
                }
            }

            const fullLink = `${baseUrl}${queryParams}`;

            const linkElement = document.getElementById('generatedLink');
            linkElement.innerText = fullLink;

            document.getElementById('copyButton').style.display = 'inline-block';
        }

        function copyToClipboard() {
            const linkElement = document.getElementById('generatedLink');
            navigator.clipboard.writeText(linkElement.innerText)
                .then(() => alert('링크가 복사되었습니다!'))
                .catch(() => alert('복사에 실패했습니다.'));
        }

        function resetAllFields() {
            document.getElementById('project').value = 'COMMON';
            document.getElementById('action').value = '';
            document.getElementById('dynamicFields').innerHTML = '';
            document.getElementById('generatedLink').innerText = '';
            document.getElementById('copyButton').style.display = 'none';
        }

        function resetAction() {
            document.getElementById('action').value = '';
            updateFields();
        }

        function resetDynamicFields() {
            document.getElementById('dynamicFields').innerHTML = '';
        }
    </script>
</body>
</html>
