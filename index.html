<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>링크 생성기</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <style>
        body {
            padding: 20px;
            font-family: Arial, sans-serif;
        }
        h1 {
            text-align: center;
            margin-bottom: 20px;
        }
        form {
            max-width: 500px;
            margin: 0 auto;
            background: #f8f9fa;
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
        }
        label {
            margin-top: 10px;
        }
        button {
            margin-top: 20px;
        }
        #generatedLink {
            margin-top: 20px;
            text-align: center;
            word-break: break-word;
        }
    </style>
</head>
<body>
    <h1>링크 생성기</h1>

    <form id="linkForm">
        <div class="mb-3">
            <label for="project" class="form-label">프로젝트 선택</label>
            <select id="project" name="project" class="form-select">
                <option value="COMMON">공통</option>
                <option value="BUS">버스</option>
                <option value="DELIVERY">배달</option>
                <option value="FLOWER">꽃배달</option>
                <option value="MEDICAL">병의원</option>
                <option value="RESERVE">예약</option>
                <option value="TAXI">택시</option>
                <option value="DRIVER">대리</option>
                <option value="ELECTRIC">전자관</option>
                <option value="BIZ">비즈</option>
                <option value="BIZ_TAXI">비즈_택시</option>
                <option value="BIZ_DRIVER">비즈_대리</option>
                <option value="BIZ_DELIVERY">비즈_배달</option>
                <option value="BIZ_FLOWER">비즈_꽃배달</option>
            </select>
        </div>

        <div class="mb-3">
            <label for="action" class="form-label">액션 선택</label>
            <select id="action" name="action" class="form-select" onchange="updateFields()">
                <option value="">-- 선택하세요 --</option>
                <option value="ACTION_LINK_ALARM">알림함으로 이동</option>
                <option value="ACTION_LINK_INQUIRY_WRITE">고객소리함 화면으로 이동</option>
                <option value="ACTION_LINK_MILEAGE">마일리지 화면으로 이동</option>
                <option value="ACTION_LINK_PAY_MANAGEMENT">결제수단 관리 화면으로 이동</option>
                <option value="ACTION_LINK_COUPON_PUBLISH">쿠폰 등록 화면</option>
                <option value="ACTION_LINK_VOUCHER_PRODUCT_LIST">상품권 구매 화면</option>
                <option value="ACTION_LINK_VOUCHER">상품권 보관함으로 이동</option>
                <option value="ACTION_LINK_NOTICE">공지사항 상세</option>
                <option value="ACTION_LINK_EVENT">이벤트 상세</option>
                <option value="ACTION_LINK_BRAND_LIST">브랜드 목록 화면</option>
                <option value="ACTION_LINK_SHOP_SEARCH">상점 검색</option>
                <option value="ACTION_LINK_SHOP_LIST">상점 목록 화면</option>
                <option value="ACTION_LINK_MENU">메뉴 상세 화면</option>
                <option value="ACTION_LINK_TRADITION_LIST">전통시장 목록 화면</option>
                <option value="ACTION_LINK_TRADITION">전통시장 상세 화면</option>
                <option value="ACTION_LINK_ALLEY">골목상권 화면</option>
                <option value="ACTION_LINK_PRODUCT_LIST">상품 목록 화면</option>
                <option value="ACTION_LINK_PRODUCT">상품 상세 화면</option>
                <option value="ACTION_LINK_PRODUCT_SEARCH">상품 검색 화면</option>
                <option value="ACTION_LINK_ORDER">주문 목록 화면</option>
            </select>
        </div>

        <div id="dynamicFields"></div>

        <button type="button" class="btn btn-primary w-100" onclick="generateLink()">링크 생성</button>
    </form>

    <h2 class="mt-4">생성된 링크:</h2>
    <div class="text-center">
        <p id="generatedLink" class="p-2 bg-light border rounded"></p>
        <button id="copyButton" class="btn btn-secondary" style="display: none;" onclick="copyToClipboard()">복사</button>
    </div>

    <script>
        const actionRequirements = {
            ACTION_LINK_ALARM: { required: ["project"], optional: [] },
            ACTION_LINK_INQUIRY_WRITE: { required: ["project"], optional: [] },
            ACTION_LINK_MILEAGE: { required: ["project"], optional: [] },
            ACTION_LINK_PAY_MANAGEMENT: { required: ["project"], optional: [] },
            ACTION_LINK_COUPON_PUBLISH: { required: ["project"], optional: ["couponCode"] },
            ACTION_LINK_NOTICE: { required: ["project", "code"], optional: [] },
            ACTION_LINK_EVENT: { required: ["project", "eventCode"], optional: [] },
            ACTION_LINK_MENU: { required: ["shopCode"], optional: [ "menuCode"] },
            // Add more actions here
        };

        function updateFields() {
            const action = document.getElementById('action').value;
            const dynamicFields = document.getElementById('dynamicFields');
            dynamicFields.innerHTML = '';

            if (!action || !actionRequirements[action]) return;

            const { required, optional } = actionRequirements[action];

            required.forEach(field => {
                dynamicFields.innerHTML += `
                    <div class="mb-3">
                        <label for="${field}" class="form-label">${field}</label>
                        <input type="text" id="${field}" name="${field}" class="form-control" placeholder="${field}">
                    </div>
                `;
            });

            optional.forEach(field => {
                dynamicFields.innerHTML += `
                    <div class="mb-3">
                        <label for="${field}" class="form-label">(선택) ${field}</label>
                        <input type="text" id="${field}" name="${field}" class="form-control" placeholder="${field}">
                    </div>
                `;
            });
        }

        function generateLink() {
            const baseUrl = "https://app.daeguro.co.kr/app/public_link.html?";
            const project = document.getElementById('project').value;
            const action = document.getElementById('action').value;

            if (!action) {
                alert('액션을 선택하세요!');
                return;
            }

            const { required, optional } = actionRequirements[action];

            let queryParams = `project=${project}&action=${action}`;

            required.forEach(field => {
                const value = document.getElementById(field)?.value;
                if (!value) {
                    alert(`${field}는 필수 입력 항목입니다.`);
                    return;
                }
                queryParams += `&${field}=${value}`;
            });

            optional.forEach(field => {
                const value = document.getElementById(field)?.value;
                if (value) {
                    queryParams += `&${field}=${value}`;
                }
            });

            const fullLink = `${baseUrl}${queryParams}`;

            const linkElement = document.getElementById('generatedLink');
            linkElement.innerText = fullLink;

            document.getElementById('copyButton').style.display = 'inline-block';
        }

        function copyToClipboard() {
            const linkElement = document.getElementById('generatedLink');
            navigator.clipboard.writeText(linkElement.innerText)
                .then(() => alert('링크가 복사되었습니다!'))
                .catch(() => alert('복사에 실패했습니다.'));
        }
    </script>
</body>
</html>
